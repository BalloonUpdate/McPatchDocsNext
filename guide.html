<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>安装教程 | McPatch文档</title><meta name="description" content="McPatch的帮助文档">
    <link rel="preload" href="/McPatchDocsNext/assets/style-CkGaMkc3.css" as="style"><link rel="stylesheet" href="/McPatchDocsNext/assets/style-CkGaMkc3.css">
    <link rel="modulepreload" href="/McPatchDocsNext/assets/app-QHMUpCa2.js"><link rel="modulepreload" href="/McPatchDocsNext/assets/guide.html-Dj3xfBJz.js"><link rel="modulepreload" href="/McPatchDocsNext/assets/guide.html-DUAmcfdj.js">
    <link rel="prefetch" href="/McPatchDocsNext/assets/index.html-WfpumwQd.js" as="script"><link rel="prefetch" href="/McPatchDocsNext/assets/script-template.html-D7LrUCyS.js" as="script"><link rel="prefetch" href="/McPatchDocsNext/assets/404.html-CnfmQthm.js" as="script"><link rel="prefetch" href="/McPatchDocsNext/assets/index.html-Dqz81rQa.js" as="script"><link rel="prefetch" href="/McPatchDocsNext/assets/script-template.html-DZ0h1ZMQ.js" as="script"><link rel="prefetch" href="/McPatchDocsNext/assets/404.html-CBzmLabc.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/McPatchDocsNext/" class=""><!----><span class="site-name">McPatch文档</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/BalloonUpdate/McPatchDocs" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/BalloonUpdate/McPatchDocs" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/McPatchDocsNext/" class="sidebar-item sidebar-heading" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a href="/McPatchDocsNext/guide" class="router-link-active sidebar-item sidebar-heading active" aria-label="安装教程"><!--[--><!--]--> 安装教程 <!--[--><!--]--></a><!----></li><li><a href="/McPatchDocsNext/script-template" class="sidebar-item sidebar-heading" aria-label="上传脚本模板"><!--[--><!--]--> 上传脚本模板 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="安装教程" tabindex="-1"><a class="header-anchor" href="#安装教程" aria-hidden="true">#</a> 安装教程</h1><h2 id="一、下载文件" tabindex="-1"><a class="header-anchor" href="#一、下载文件" aria-hidden="true">#</a> 一、下载文件</h2><p>在开始安装之前，要提前下载好这些文件：</p><ol><li>mcpatch-manager.exe：这是管理端，用来打更新包</li><li>mcpatch-client.exe：这是客户端，用来更新下载更新文件</li></ol><h2 id="二、配置管理端" tabindex="-1"><a class="header-anchor" href="#二、配置管理端" aria-hidden="true">#</a> 二、配置管理端</h2><p>管理端是用来打包和管理更新包的工具，同时也提供一个内置的服务端功能，提供开箱即用的下载体验。</p><p>将管理端放到一个新建的目录mp中，然后打开终端，我们需要在终端里启动管理端。</p><p>第一次输入<code>mcpatch-manager.exe</code>不带任何参数运行，会输出帮助信息和生成工作空间目录workspace，这样管理端就配置好了。</p><h2 id="三、放入要更新的文件" tabindex="-1"><a class="header-anchor" href="#三、放入要更新的文件" aria-hidden="true">#</a> 三、放入要更新的文件</h2><p>只把需要更新的文件放到工作空间目录里，暂时不更新的文件可以以后再放，能减少更新包的大小。</p><p>同时工作空间目录下的文件要和客户端保持相同的目录结构。</p><p>下面一些栗子可以参考（不存在的文件夹需要手动创建）：</p><ul><li><p>要更新所有模组，复制<code>.minecraft/mods</code>目录</p><ul><li>到<code>mp/workspace/.minecraft/mods</code></li></ul></li><li><p>要更新.minecraft目录旁边的<code>新玩家进服教程.txt</code>，复制<code>新玩家进服教程.txt</code>文件</p><ul><li>到<code>mp/workspace/新玩家进服教程.txt</code></li></ul></li><li><p>如果你开了版本隔离，就需要复制<code>.minecraft/versions/your-version/mods</code>目录</p><ul><li>到<code>mp/workspace/.minecraft/versions/your-version/mods</code></li><li>其它文件也是同理，需要复制到versions目录下</li></ul></li></ul><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>若开启版本隔离，那么要更新的实际上是versions目录下的mods文件夹，把文件放到<code>.minecraft/mods</code>目录下，游戏是读取不到的。</p></div><h2 id="四、开始打包" tabindex="-1"><a class="header-anchor" href="#四、开始打包" aria-hidden="true">#</a> 四、开始打包</h2><p>在终端里输入<code>mcpatch-manager.exe pack &lt;version&gt;</code>即可开始打包，<code>&lt;version&gt;</code>是要打包的版本号，不能和现有的冲突。</p><p>版本号只能包括大小写字母，数字，以及<code>!@#$()_+-=;&#39;,.</code>这几个符号，不要使用中文，空格，或其它字符，会出问题。</p><p>如果你想给这个版本增加更新记录的话，把更新记录写在管理端目录的<code>logs.txt</code>文件里就会自动读取到了（使用utf-8编码）。</p><p>看到“打包完成！”的字样即代表打包成功了，更新包会存放在public目录下，会按版本号进行命名。</p><p>如果对打包结果不放心，可以使用<code>mcpatch-manager.exe test</code>对更新包进行校验，这会模拟客户端的解压过程，检查文件是否损坏。</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>已经打好的更新包文件不能手动删除也不能修改里面的文件，这会导致数据损坏，应该再打一个新的包来替代删除旧的包。</p></div><h2 id="五、后续打包" tabindex="-1"><a class="header-anchor" href="#五、后续打包" aria-hidden="true">#</a> 五、后续打包</h2><p>后续的文件维护很简单，直接对工作空间目录下的文件或者目录进行增加，删除，修改即可，修改完后输入pack打包。</p><p>管理端会自动识别到你所做的更改，并记录到更新包里。</p><p>即使新旧文件同名，只修改了文件里的数据，也能检测到。目录也是一样，该新增新增，该删除删除，就像对自己电脑上的文件一样操作就好。</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>管理端目前还没有提供复原工作空间目录的指令，如果有这个需求，需要手动从更新包中把文件解压出来。后面会把这个功能加上。</p></div><h2 id="六、启动服务端" tabindex="-1"><a class="header-anchor" href="#六、启动服务端" aria-hidden="true">#</a> 六、启动服务端</h2><p>在终端里使用<code>mcpatch-manager.exe serve 6700</code>可以启动内置的服务端，默认端口是6700。</p><p>想要关闭服务端可以叉掉终端的窗口，或者按Ctrl + C即可。</p><p>内置的服务端使用基于TCP的私有协议，不是http不用担心备案问题，适合小服或者本地调试环境。</p><h2 id="七、配置客户端" tabindex="-1"><a class="header-anchor" href="#七、配置客户端" aria-hidden="true">#</a> 七、配置客户端</h2><p>将客户端放到<code>.minecraft</code>目录旁边紧挨着，然后直接双击运行。</p><p>看到窗口弹出后把它关掉，此时它会生成配置文件<code>mcpatch.yml</code>，我们打开编辑。</p><p>唯一需要修改的是<code>urls</code>选项，这个参数控制更新服务器的地址，将127.0.0.1:6700修改成自己服务器的ip和端口即可。</p><p>其它选项可以按需修改，但不是必须的，完成后保存关闭。</p><h2 id="八、一键启动" tabindex="-1"><a class="header-anchor" href="#八、一键启动" aria-hidden="true">#</a> 八、一键启动</h2><p>每次都要手动运行更新很麻烦，可以借助一些方法在游戏启动时自动进行更新。</p><p>首先到<a href="https://github.com/BalloonUpdate/McPatch2Loader/releases" target="_blank" rel="noopener noreferrer">BalloonUpdate/McPatch2Loader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>下载最新版的加载器文件。</p><p>新建目录<code>.minecraft/mp</code>，把刚下载的加载器和客户端程序移动进来。</p><p>打开Minecraft启动器（任意启动器均可，官方启动器除外），调整游戏版本设置，找到Java虚拟机参数（或者JVM 参数）。</p><p>在参数的开头插入这串代码<code>-javaagent:mp/loader-1.jar</code>，然后回到启动器主界面。</p><p>接着创建“启动列表”文件<code>.minecraft/mp/startlist.txt</code>，将客户端程序的文件名写进去，比如<code>mcpatch-client-0.0.0.exe</code>，然后保存关闭。</p><p>点击Minecraft启动器的“启动游戏”按钮，一切顺利的话就会自动启动更新了。</p><h2 id="九、经常被问到的问题" tabindex="-1"><a class="header-anchor" href="#九、经常被问到的问题" aria-hidden="true">#</a> 九、经常被问到的问题</h2><h3 id="文件更新位置" tabindex="-1"><a class="header-anchor" href="#文件更新位置" aria-hidden="true">#</a> 文件更新位置</h3><p>客户端程序会自动搜索.minecraft的父目录作为更新起始位置，到处移动客户端程序不会影响文件更新位置。</p><p>如果要调整这个机制，可以修改配置文件里的<code>base-path</code>选项</p><h3 id="删除管理端不存在的文件" tabindex="-1"><a class="header-anchor" href="#删除管理端不存在的文件" aria-hidden="true">#</a> 删除管理端不存在的文件</h3><p>客户端有些文件不在工作空间目录中，但又想删掉这个文件，可以在工作空间目录创建一个同路径且同名的空文件。</p><p>打一个更新包，然后再将这些文件删掉，再打一个包，客户端就可以正常删除这些不存在的文件了。</p><h3 id="版本号不是判断版本新旧的依据" tabindex="-1"><a class="header-anchor" href="#版本号不是判断版本新旧的依据" aria-hidden="true">#</a> 版本号不是判断版本新旧的依据</h3><p>版本号只是一个普通的标签，是给人类看的，程序不会解析对比版本号的文字，也不作为任何判断版本前后的依据。</p><p>版本号的判断顺序的按打包时间来计算的，后打的版本总是新版本。</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/BalloonUpdate/McPatchDocs/edit/main/guide.md" rel="noopener noreferrer" target="_blank" aria-label="在Github上编辑此页面"><!--[--><!--]--> 在Github上编辑此页面 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新于: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者们: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: asforest@qq.com">asforest</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/McPatchDocsNext/assets/app-QHMUpCa2.js" defer></script>
  </body>
</html>
